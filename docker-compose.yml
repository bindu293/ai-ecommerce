backend:
  build:
    context: ./backend
    dockerfile: Dockerfile
  container_name: ai-ecommerce-backend
  ports:
    - "5000:5000"
  env_file:
    - ./backend/.env.backend
  restart: unless-stopped

frontend:
  build:
    context: ./frontend
    dockerfile: Dockerfile
    args:
      VITE_API_URL: /api
      VITE_FIREBASE_API_KEY: ${VITE_FIREBASE_API_KEY}
      VITE_FIREBASE_AUTH_DOMAIN: ${VITE_FIREBASE_AUTH_DOMAIN}
      VITE_FIREBASE_PROJECT_ID: ${VITE_FIREBASE_PROJECT_ID}
      VITE_FIREBASE_STORAGE_BUCKET: ${VITE_FIREBASE_STORAGE_BUCKET}
      VITE_FIREBASE_MESSAGING_SENDER_ID: ${VITE_FIREBASE_MESSAGING_SENDER_ID}
      VITE_FIREBASE_APP_ID: ${VITE_FIREBASE_APP_ID}
  container_name: ai-ecommerce-frontend
  ports:
    - "5175:80"
  depends_on:
    - backend
  env_file:
    - ./frontend/.env
  restart: unless-stopped
